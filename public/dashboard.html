<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WhatsApp API Dashboard</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      color: #333;
    }
    header {
      background: #128C7E;
      padding: 15px 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    header h1 {
      color: white;
      font-size: 24px;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 12px;
      flex-wrap: wrap;
    }
    .nav-btn {
      background: #25D366;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      transition: opacity 0.2s;
    }
    .nav-btn:hover { opacity: 0.9; }
    .nav-btn.active { background: #128C7E; }

    main {
      max-width: 750px;
      margin: 20px auto;
      padding: 0 20px;
    }
    .view {
      display: none;
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .view.active {
      display: block;
    }

    /* Formularios */
    input, button, select {
      padding: 10px;
      margin: 6px 0;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      background: #25D366;
      color: white;
      cursor: pointer;
      width: auto;
      display: inline-block;
    }
    .btn-warning { background: #ffaa00; }
    .btn-danger { background: #ff4d4d; }
    .btn-image { background: #4A90E2; }
    #qr-img {
      display: block;
      max-width: 300px;
      margin: 20px auto;
      border: 1px solid #eee;
    }
    .status { margin: 12px 0; font-weight: bold; min-height: 22px; padding: 8px; border-radius: 4px; }
    .connected { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    .info { background: #d1ecf1; color: #0c5460; }

    /* Tabla de sesiones */
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
    th { background: #f8f9fa; font-weight: bold; }
    .status-connected { color: green; font-weight: bold; }
    .status-qr { color: orange; }
    .status-error { color: red; }
    .action-btn {
      padding: 6px 10px;
      margin: 2px;
      font-size: 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .close-btn { background: #ff4d4d; color: white; }
  </style>
</head>
<body>
  <header>
    <h1>üì± WhatsApp API Dashboard</h1>
    <nav>
      <button class="nav-btn active" data-view="connect">Conectar</button>
      <button class="nav-btn" data-view="sessions">Sesiones</button>
      <button class="nav-btn" data-view="send">Enviar Texto</button>
      <button class="nav-btn" data-view="send-image">Enviar Imagen</button>
    </nav>
  </header>

  <main>
    <!-- Vista: Conectar -->
    <section id="connect-view" class="view active">
      <h2>Conectar nueva sesi√≥n</h2>
      <input type="text" id="sessionId" placeholder="Session ID (ej: cliente-123)" />
      <br />
      <button onclick="initSession()">Iniciar Sesi√≥n</button>
      <div id="status" class="status info">Ingresa un Session ID</div>
      
      <div id="session-controls" style="display:none; margin-top:15px;">
        <button class="btn-warning" onclick="restartSession()">üîÑ Reiniciar QR</button>
        <button class="btn-danger" onclick="closeSession()">‚ùå Cerrar Sesi√≥n</button>
      </div>

      <img id="qr-img" alt="QR Code" style="display:none;" />
    </section>

    <!-- Vista: Sesiones -->
    <section id="sessions-view" class="view">
      <h2>Sesiones activas</h2>
      <button onclick="loadSessions()" style="width:auto;">‚Üª Actualizar</button>
      <div id="sessions-list">
        <p>Cargando...</p>
      </div>
    </section>

    <!-- Vista: Enviar Texto -->
    <section id="send-view" class="view">
      <h2>Enviar mensaje de texto</h2>
      <p id="send-instructions">Conecta una sesi√≥n primero.</p>
      <div id="send-form" style="display:none;">
        <input type="text" id="send-sessionId" readonly placeholder="Session ID" />
        <input type="text" id="phone" placeholder="Tel√©fono (ej: 5491112345678)" />
        <input type="text" id="message" placeholder="Mensaje" />
        <button onclick="sendMessage()">Enviar WhatsApp</button>
        <div id="send-status" class="status" style="display:none;"></div>
      </div>
    </section>

    <!-- Vista: Enviar Imagen -->
    <section id="send-image-view" class="view">
      <h2>Enviar imagen</h2>
      <p id="image-instructions">Conecta una sesi√≥n primero.</p>
      <div id="image-form" style="display:none;">
        <input type="text" id="image-sessionId" readonly placeholder="Session ID" />
        <input type="text" id="image-phone" placeholder="Tel√©fono (ej: 5491112345678)" />
        <input type="text" id="image-caption" placeholder="Texto (opcional)" />
        <input type="file" id="image-file" accept="image/*,application/pdf,video/*,audio/*" />
        <button class="btn-image" onclick="sendImage()">üì§ Enviar Imagen</button>
        <div id="image-status" class="status" style="display:none;"></div>
      </div>
    </section>
  </main>

  <script defer src="./scripts/app.js">
    
  </script>
</body>
</html>