<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WhatsApp API Dashboard</title>
  <link rel="stylesheet" href="./styles/style.css">
</head>
<body>
  <header>
    <h1>📱 WhatsApp API Dashboard</h1>
    <nav>
      <button class="nav-btn active" data-view="connect">Conectar</button>
      <button class="nav-btn" data-view="sessions">Sesiones</button>
      <button class="nav-btn" data-view="send">Enviar Texto</button>
      <button class="nav-btn" data-view="send-image">Enviar Imagen</button>
    </nav>
  </header>

  <main>
    <!-- Vista: Conectar -->
    <section id="connect-view" class="view active">
      <h2>Conectar nueva sesión</h2>
      <input type="text" id="sessionId" placeholder="Session ID (ej: cliente-123)" />
      <br />
      <button id="init-btn">Iniciar Sesión</button>
      
      <!-- Loader -->
      <div id="loader" class="loader">
        <div class="spinner"></div>
        <p id="loader-text">Conectando a WhatsApp...</p>
      </div>

      <div id="status" class="status info">Ingresa un Session ID</div>
      
      <div id="session-controls" style="display:none; margin-top:15px;">
        <button id="restart-btn" class="btn-warning">🔄 Reiniciar QR</button>
        <button id="close-btn" class="btn-danger">❌ Cerrar Sesión</button>
      </div>

      <img id="qr-img" alt="QR Code" style="display:none;" />
    </section>

    <!-- Vista: Sesiones -->
    <section id="sessions-view" class="view">
      <h2>Sesiones activas</h2>
      <button id="refresh-sessions">↻ Actualizar</button>
      <div id="sessions-list">
        <p>Cargando...</p>
      </div>
    </section>

    <!-- Vista: Enviar Texto -->
    <section id="send-view" class="view">
      <h2>Enviar mensaje de texto</h2>
      <p id="send-instructions">Conecta una sesión primero.</p>
      <div id="send-form" style="display:none;">
        <input type="text" id="send-sessionId" readonly placeholder="Session ID" />
        <input type="text" id="phone" placeholder="Teléfono (ej: 5491112345678)" />
        <input type="text" id="message" placeholder="Mensaje" />
        <button id="send-msg-btn">Enviar WhatsApp</button>
        
        <div id="send-loader" class="loader" style="display:none;">
          <div class="spinner"></div>
          <p>Enviando mensaje...</p>
        </div>
        
        <div id="send-status" class="status" style="display:none;"></div>
      </div>
    </section>

    <!-- Vista: Enviar Imagen -->
    <section id="send-image-view" class="view">
      <h2>Enviar imagen</h2>
      <p id="image-instructions">Conecta una sesión primero.</p>
      <div id="image-form" style="display:none;">
        <input type="text" id="image-sessionId" readonly placeholder="Session ID" />
        <input type="text" id="image-phone" placeholder="Teléfono (ej: 5491112345678)" />
        <input type="text" id="image-caption" placeholder="Texto (opcional)" />
        <input type="file" id="image-file" accept="image/*,application/pdf,video/*,audio/*" />
        <button id="send-image-btn" class="btn-image">📤 Enviar Imagen</button>
        
        <div id="image-loader" class="loader" style="display:none;">
          <div class="spinner"></div>
          <p>Procesando y enviando imagen...</p>
        </div>
        
        <div id="image-status" class="status" style="display:none;"></div>
      </div>
    </section>
  </main>

  <script src="./scripts/app.js"></script>
</body>
</html>